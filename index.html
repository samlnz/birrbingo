<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Bingo Casino</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .app-container {
            max-width: 1200px;
            width: 100%;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            border: 2px solid #00b4d8;
            animation: fadeIn 1s ease-out;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid #00b4d8;
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .logo-icon {
            font-size: 3.5rem;
            color: #00b4d8;
            animation: pulse 2s infinite;
        }

        h1 {
            font-size: 3rem;
            background: linear-gradient(90deg, #00b4d8, #90e0ef);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 5px 15px rgba(0, 180, 216, 0.3);
            letter-spacing: 2px;
        }

        .subtitle {
            font-size: 1.2rem;
            color: #90e0ef;
            margin-top: 10px;
            opacity: 0.9;
        }

        .game-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .info-card {
            background: rgba(0, 180, 216, 0.1);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(0, 180, 216, 0.3);
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
            border-color: #00b4d8;
        }

        .info-card i {
            font-size: 2.5rem;
            color: #00b4d8;
            margin-bottom: 15px;
        }

        .info-card h3 {
            color: #90e0ef;
            margin-bottom: 10px;
            font-size: 1.3rem;
        }

        .info-card p {
            color: #caf0f8;
            line-height: 1.6;
        }

        .start-section {
            text-align: center;
            margin-top: 40px;
        }

        .timer-display {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 30px;
            display: inline-block;
            border: 2px solid #00b4d8;
        }

        .timer-label {
            color: #90e0ef;
            font-size: 1.1rem;
            margin-bottom: 10px;
        }

        .timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: #00b4d8;
            font-family: 'Courier New', monospace;
        }

        .btn-start {
            background: linear-gradient(135deg, #00b4d8, #0077b6);
            color: white;
            border: none;
            padding: 20px 50px;
            font-size: 1.5rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 15px;
            box-shadow: 0 10px 25px rgba(0, 180, 216, 0.4);
            animation: bounce 2s infinite;
        }

        .btn-start:hover {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 180, 216, 0.6);
            background: linear-gradient(135deg, #0096c7, #005f8a);
        }

        .rules {
            margin-top: 50px;
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            padding: 25px;
            border-left: 5px solid #00b4d8;
        }

        .rules h2 {
            color: #00b4d8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rules ul {
            list-style: none;
            padding-left: 20px;
        }

        .rules li {
            margin-bottom: 12px;
            color: #caf0f8;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .rules li:before {
            content: "âœ“";
            color: #00b4d8;
            font-weight: bold;
        }

        .player-stats {
            display: flex;
            justify-content: space-between;
            background: rgba(0, 180, 216, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-top: 30px;
            border: 1px solid rgba(0, 180, 216, 0.3);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            color: #00b4d8;
            font-weight: bold;
        }

        .stat-label {
            color: #90e0ef;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @media (max-width: 768px) {
            .app-container {
                padding: 20px;
            }
            
            h1 {
                font-size: 2.2rem;
            }
            
            .game-info {
                grid-template-columns: 1fr;
            }
            
            .btn-start {
                padding: 15px 30px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="logo">
                <i class="fas fa-dice-d20 logo-icon"></i>
                <h1>TELEGRAM BINGO CASINO</h1>
            </div>
            <p class="subtitle">Multiplayer Bingo Game with up to 500 Players</p>
        </div>

        <div class="player-stats">
            <div class="stat">
                <div class="stat-value" id="currentPlayers">0</div>
                <div class="stat-label">Current Players</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="cardsTaken">0</div>
                <div class="stat-label">Cards Taken</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timeLeft">60</div>
                <div class="stat-label">Seconds Left</div>
            </div>
        </div>

        <div class="game-info">
            <div class="info-card">
                <i class="fas fa-layer-group"></i>
                <h3>Choose Your Cards</h3>
                <p>Select up to 2 bingo cards from 500 available. Each card is uniquely numbered.</p>
            </div>
            <div class="info-card">
                <i class="fas fa-bullhorn"></i>
                <h3>Live Number Calling</h3>
                <p>Watch as numbers are called every 5 seconds with professional animations.</p>
            </div>
            <div class="info-card">
                <i class="fas fa-trophy"></i>
                <h3>Win Prizes</h3>
                <p>Be the first to complete a line (horizontal, vertical, or diagonal) and win!</p>
            </div>
        </div>

        <div class="start-section">
            <div class="timer-display">
                <div class="timer-label">Card Selection Time Limit</div>
                <div class="timer" id="mainTimer">01:00</div>
            </div>
            
            <button class="btn-start" id="startGameBtn">
                <i class="fas fa-play-circle"></i>
                START CARD SELECTION
            </button>
        </div>

        <div class="rules">
            <h2><i class="fas fa-info-circle"></i> How to Play</h2>
            <ul>
                <li>Each player can choose up to 2 bingo cards</li>
                <li>You have exactly 1 minute to select your cards</li>
                <li>Once time is up, the game begins automatically</li>
                <li>Numbers will be called every 5 seconds from 1-75</li>
                <li>Mark numbers on your card as they're called</li>
                <li>Complete any line (horizontal, vertical, or diagonal) to win</li>
                <li>Click BINGO when you complete a line or use auto-detection</li>
                <li>Winner will be announced with their Telegram username</li>
            </ul>
        </div>
    </div>

    <script>
        // Telegram Web App initialization
        const tg = window.Telegram.WebApp;
        
        // Initialize Telegram Web App
        tg.expand();
        tg.enableClosingConfirmation();
        
        // Game state
        const gameState = {
            currentPlayers: 0,
            cardsTaken: 0,
            totalCards: 500,
            selectionTime: 60, // 1 minute in seconds
            timerInterval: null,
            isSelectionActive: false
        };

        // DOM elements
        const currentPlayersEl = document.getElementById('currentPlayers');
        const cardsTakenEl = document.getElementById('cardsTaken');
        const timeLeftEl = document.getElementById('timeLeft');
        const mainTimerEl = document.getElementById('mainTimer');
        const startGameBtn = document.getElementById('startGameBtn');

        // Initialize with random player count (simulating live data)
        function initializeGame() {
            // Simulate random player count between 50-200
            gameState.currentPlayers = Math.floor(Math.random() * 150) + 50;
            currentPlayersEl.textContent = gameState.currentPlayers;
            
            // Simulate some cards already taken
            gameState.cardsTaken = Math.floor(Math.random() * 100);
            cardsTakenEl.textContent = gameState.cardsTaken;
            
            // Update timer display
            updateTimerDisplay();
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(gameState.selectionTime / 60);
            const seconds = gameState.selectionTime % 60;
            mainTimerEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            timeLeftEl.textContent = gameState.selectionTime;
        }

        // Start the selection timer
        function startSelectionTimer() {
            if (gameState.timerInterval) {
                clearInterval(gameState.timerInterval);
            }
            
            gameState.isSelectionActive = true;
            gameState.selectionTime = 60;
            updateTimerDisplay();
            
            gameState.timerInterval = setInterval(() => {
                gameState.selectionTime--;
                updateTimerDisplay();
                
                if (gameState.selectionTime <= 0) {
                    clearInterval(gameState.timerInterval);
                    startGame();
                }
            }, 1000);
        }

        // Start the game (redirect to card selection)
        function startGame() {
            // Show loading animation
            startGameBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> LOADING...';
            startGameBtn.disabled = true;
            
            // Simulate loading delay
            setTimeout(() => {
                // Redirect to card selection page
                window.location.href = 'choose-cards.html';
            }, 1500);
        }

        // Event listeners
        startGameBtn.addEventListener('click', () => {
            // Start selection timer
            startSelectionTimer();
            
            // Update button
            startGameBtn.innerHTML = '<i class="fas fa-hourglass-start"></i> SELECTION STARTED';
            startGameBtn.style.background = 'linear-gradient(135deg, #ff9e00, #ff7700)';
            startGameBtn.disabled = true;
            
            // Simulate player joining
            gameState.currentPlayers++;
            currentPlayersEl.textContent = gameState.currentPlayers;
            
            // Send data to Telegram bot (simulated)
            if (tg.initDataUnsafe && tg.initDataUnsafe.user) {
                console.log('Telegram User:', tg.initDataUnsafe.user);
                // Here you would send this data to your backend
            }
        });

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', initializeGame);

        // Handle page visibility change (for timer accuracy)
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                console.log('Page is hidden');
            } else {
                console.log('Page is visible');
            }
        });
    </script>
</body>
</html>